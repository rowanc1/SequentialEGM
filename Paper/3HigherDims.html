

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>The EGM\(^n\) in Higher Dimensions &#8212; My Jupyter Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Paper/3HigherDims';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Multivariate Interpolation on Non-Rectilinear Grids" href="4UnstructuredInterp.html" />
    <link rel="prev" title="The Sequential Endogenous Grid Method" href="2Method.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
  
    <p class="title logo__title">My Jupyter Book</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    EGM^n: The Sequential Endogenous Grid Method
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Calibration/README.html">Calibration of Model Parameters Should Be Here</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Code/README.html">Contains computer code used to generate all results</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Code/Empirical/README.html">Code to Produce empirical results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Equations/README.html">Equations That Should Be Reproducible</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Figures/README.html">All Figures for Paper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Highlighted/README.html">Highlighted Passages</a></li>
<li class="toctree-l1"><a class="reference internal" href="1Intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="2Method.html">The Sequential Endogenous Grid Method</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">The EGM<span class="math notranslate nohighlight">\(^n\)</span> in Higher Dimensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="4UnstructuredInterp.html">Multivariate Interpolation on Non-Rectilinear Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="5WhentoUse.html">Conditions for using the Sequential Endogenous Grid Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="6Conclusion.html">Conclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="7Appendix.html">Solving the illustrative G2EGM model with EGM<span class="math notranslate nohighlight">\(^n\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tables/README.html">LaTeX Input Files for Tables</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Paper/3HigherDims.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>The EGM^n in Higher Dimensions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-more-complex-problem">A more complex problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breaking-down-the-problem">Breaking down the problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-consumption-saving-problem">The consumption-saving problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pension-deposit-problem">The pension deposit problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unstructured-grid-interpolation">Unstructured Grid Interpolation</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="the-egm-n-in-higher-dimensions">
<span id="higherdims"></span><h1>The EGM<span class="math notranslate nohighlight">\(^n\)</span> in Higher Dimensions<a class="headerlink" href="#the-egm-n-in-higher-dimensions" title="Permalink to this headline">#</a></h1>
<p>The problem in <span class="xref myst">Section %s</span> demonstrates the simplicity of solving problems sequentially. However, as constructed, the problem has only one state variable and one post-decision state variable per stage. Can EGM<span class="math notranslate nohighlight">\(^n\)</span> be used to solve higher dimensional problems? In short, yes, but it requires additional thought on interpolation.</p>
<section id="a-more-complex-problem">
<span id="id1"></span><h2>A more complex problem<a class="headerlink" href="#a-more-complex-problem" title="Permalink to this headline">#</a></h2>
<p>For a demonstration, we now turn to the problem of a worker saving up for retirement. This worker must consume, save, and deposit resources into a tax-advantaged account that can not be liquidated until retirement. In the recursive problem, the worker begins a new period with a liquid account of market resources <span class="math notranslate nohighlight">\(\mRat_{t}\)</span> and an illiquid account of retirement savings <span class="math notranslate nohighlight">\(\nRat_{t}\)</span>. The worker maximizes their utility by choosing consumption <span class="math notranslate nohighlight">\(\cRat_{t}\)</span> and pension deposit <span class="math notranslate nohighlight">\(\dRat_{t}\)</span>. The pension deposit is set aside on a retirement account that is exposed to a risky return, while their post-consumption liquid assets accrue risk-free interest every period. The worker additionally receives an income that faces a permanent (<span class="math notranslate nohighlight">\(\PGro_{t+1}\)</span>) and a transitory (<span class="math notranslate nohighlight">\(\tShkEmp_{t+1}\)</span>) shock every period. At the age of 65, the worker is retired and their assets are liquidated, at which point the state reduces to one liquid account of market resources. The worker’s recursive problem is:</p>
<p>\begin{equation}
\begin{split}
\vFunc_{t}(\mRat_{t}, \nRat_{t}) &amp; = \max_{\cRat_{t}, \dRat_{t}} \util(\cRat_{t}) + \DiscFac \Ex_{t} \left[ \PGro_{t+1}^{1-\CRRA} \vFunc_{t+1}(\mRat_{t+1}, \nRat_{t+1}) \right] \
&amp; \text{s.t.} \quad \cRat_{t} \ge 0, \quad \dRat_{t} \ge 0 \
\aRat_{t} &amp; = \mRat_{t} - \cRat_{t} - \dRat_{t} \
\bRat_{t} &amp; = \nRat_{t} + \dRat_{t} + g(\dRat_{t}) \
\mRat_{t+1} &amp; = \aRat_{t} \Rfree / \PGro_{t+1}  + \tShkEmp_{t+1} \
\nRat_{t+1} &amp; = \bRat_{t} \Risky_{t+1} / / \PGro_{t+1}
\end{split}
\end{equation}</p>
<p>where</p>
<p>\begin{equation}
\gFunc(\dRat) = \xFer \log(1+\dRat).
\end{equation}</p>
<p>This problem can subsequently be broken down into 3 stages: a pension deposit stage, a consumption stage, and an income shock stage.</p>
</section>
<section id="breaking-down-the-problem">
<span id="id2"></span><h2>Breaking down the problem<a class="headerlink" href="#breaking-down-the-problem" title="Permalink to this headline">#</a></h2>
<p>In the deposit stage, the worker begins with market resources and a retirement savings account. The worker must maximize their value of liquid wealth <span class="math notranslate nohighlight">\(\lRat_{t}\)</span> and retirement balance <span class="math notranslate nohighlight">\(\bRat_{t}\)</span> by choosing a pension deposit <span class="math notranslate nohighlight">\(\dRat_{t}\)</span>, which must be positive. The retirement balance <span class="math notranslate nohighlight">\(\bRat\)</span> is the cash value of their retirement account plus their pension deposit and an additional amount <span class="math notranslate nohighlight">\(g(\dRat_{t})\)</span> that provides an incentive to save for retirement. As we’ll see, this additional term will allow us to use the Endogenous Grid Method to solve this subproblem.</p>
<p>\begin{equation}
\begin{split}
\vFunc_{t}(\mRat_{t}, \nRat_{t}) &amp; = \max_{\dRat_{t}} \vOpt_{t}(\lRat_{t}, \bRat_{t}) \
&amp; \text{s.t.}  \quad \dRat_{t} \ge 0 \
\lRat_{t} &amp; = \mRat_{t} - \dRat_{t} \
\bRat_{t} &amp; = \nRat_{t} + \dRat_{t} + g(\dRat_{t})
\end{split}
\end{equation}</p>
<p>After making their pension decision, the worker begins their consumption stage with liquid wealth <span class="math notranslate nohighlight">\(\lRat_{t}\)</span> and retirement balance <span class="math notranslate nohighlight">\(\bRat_{t}\)</span>. From their liquid wealth, the worker must choose a level of consumption to maximize utility and continuation value <span class="math notranslate nohighlight">\(\wFunc_{t}\)</span>. After consumption, the worker is left with post-decision states that represent liquid assets <span class="math notranslate nohighlight">\(\aRat_{t}\)</span> and retirement balance <span class="math notranslate nohighlight">\(\bRat_{t}\)</span>, which passes through this problem unaffected because it can’t be liquidated until retirement.</p>
<p>\begin{equation}
\begin{split}
\vOpt_{t}(\lRat_{t}, \bRat_{t}) &amp; = \max_{\cRat_{t}} \util(\cRat_{t}) + \DiscFac \wFunc_{t}(\aRat_{t}, \bRat_{t})  \
&amp; \text{s.t.} \quad \cRat_{t} \ge 0 \
\aRat_{t} &amp; = \lRat_{t} - \cRat_{t}
\end{split}
\end{equation}</p>
<p>Finally, the post-decision value function <span class="math notranslate nohighlight">\(\wFunc_{t}\)</span> represents the value of both liquid and illiquid account balances before the realization of uncertainty regarding the risky return and income shocks. Since we are dealing with a normalized problem, this stage handles the normalization of state variables and value functions into the next period.</p>
<p>\begin{equation}
\begin{split}
\wFunc_{t}(\aRat_{t}, \bRat_{t}) &amp; = \Ex_{t} \left[ \PGro_{t+1}^{1-\CRRA} \vFunc_{t+1}(\mRat_{t+1}, \mRat_{t+1}) \right] \
&amp; \text{s.t.} \quad \aRat_{t} \ge 0, \quad \bRat_{t} \ge 0 \
\mRat_{t+1} &amp; = \aRat_{t} \Rfree / \PGro_{t+1}  + \tShkEmp_{t+1} \
\nRat_{t+1} &amp; = \bRat_{t} \Risky_{t+1} /  \PGro_{t+1}
\end{split}
\end{equation}</p>
<p>The advantage of conceptualizing this subproblem as a separate stage is that we can construct a function <span class="math notranslate nohighlight">\(\wFunc_{t}\)</span> and use it in the prior optimization problems without having to worry about stochastic optimization and taking expectations repeatedly.</p>
</section>
<section id="the-consumption-saving-problem">
<span id="id3"></span><h2>The consumption-saving problem<a class="headerlink" href="#the-consumption-saving-problem" title="Permalink to this headline">#</a></h2>
<p>As seen in the consumption stage above, the retirement balance <span class="math notranslate nohighlight">\(\bRat_{t}\)</span> passes through the problem unaffected because it can’t be liquidated until retirement. In this sense, it is already a post-decision state variable. To solve this problem, we can use a fixed grid of <span class="math notranslate nohighlight">\(\bRat_{t}\)</span> and for each obtain endogenous consumption and ex-ante market resources using the simple Endogenous Grid Method for the consumption problem.</p>
</section>
<section id="the-pension-deposit-problem">
<span id="id4"></span><h2>The pension deposit problem<a class="headerlink" href="#the-pension-deposit-problem" title="Permalink to this headline">#</a></h2>
<p>In the deposit stage, both the state variables and post-decision variables are different since both are affected by the pension deposit decision.</p>
<p>First, we can rewrite the pension deposit problem more compactly:</p>
<p>\begin{equation}
\vFunc_{t}(\mRat_{t}, \nRat_{t}) = \max_{\dRat_{t}}
\vOpt_{t}(\mRat_{t}</p>
<ul class="simple">
<li><p>\dRat_{t}, \nRat_{t} + \dRat_{t} + \gFunc(\dRat_{t}))
\end{equation}</p></li>
</ul>
<p>The first-order condition is</p>
<p>\begin{equation}
\vOpt_{t}^{\lRat}(\lRat_{t}, \bRat_{t})(-1) +
\vOpt_{t}^{\bRat}(\lRat_{t}, \bRat_{t})(1+\gFunc’(\dRat_{t})) = 0.
\end{equation}</p>
<p>Rearranging this equation gives</p>
<p>\begin{equation}
\gFunc’(\dRat_{t}) = \frac{\vOpt_{t}^{\lRat}(\lRat_{t},
\bRat_{t})}{\vOpt_{t}^{\bRat}(\lRat_{t}, \bRat_{t})} - 1
\end{equation}</p>
<p>where</p>
<p>\begin{equation}
\gFunc’(\dRat) =
\frac{\xFer}{1+\dRat} \qquad \gFunc’^{-1}(y) = \xFer/y - 1
\end{equation}</p>
<p>Given that <span class="math notranslate nohighlight">\(\gFunc'(\dRat)\)</span> exists and is invertible, we can find</p>
<p>\begin{equation}
\dEndFunc_{t}(\lRat_{t}, \bRat_{t}) = \gFunc’^{-1}\left(
\frac{\vOpt_{t}^{\lRat}(\lRat_{t},
\bRat_{t})}{\vOpt_{t}^{\bRat}(\lRat_{t},
\bRat_{t})} - 1 \right)
\end{equation}</p>
<p>Using this, we can back out <span class="math notranslate nohighlight">\(\nRat_{t}\)</span> as</p>
<p>\begin{equation}
\nEndFunc_{t}(\lRat_{t}, \bRat_{t}) = \bRat_{t} -
\dEndFunc_{t}(\lRat_{t}, \bRat_{t}) - \gFunc(\dEndFunc_{t}(\lRat_{t},
\bRat_{t}))
\end{equation}</p>
<p>and <span class="math notranslate nohighlight">\(\mRat_{t}\)</span> as</p>
<p>\begin{equation}
\mEndFunc_{t}(\lRat_{t}, \bRat_{t}) = \lRat_{t} +
\dEndFunc_{t}(\lRat_{t}, \bRat_{t})
\end{equation}</p>
<p>In sum, given an exogenous grid <span class="math notranslate nohighlight">\((\lRat_{t}, \bRat_{t})\)</span> we obtain the triple
<span class="math notranslate nohighlight">\(\left(\mEndFunc_{t}(\lRat_{t}, \bRat_{t}), \nEndFunc_{t}(\lRat_{t},
    \bRat_{t}), \dEndFunc_{t}(\lRat_{t}, \bRat_{t})\right)\)</span>, which
we can use to
create an interpolator for the decision rule <span class="math notranslate nohighlight">\(\dRat_{t}\)</span>.</p>
<p>To close the solution method, the envelope conditions are</p>
<p>\begin{equation}
\begin{split}
\vFunc_{t}^{\mRat}(\mRat_{t}, \nRat_{t}) &amp; =
\vOpt_{t}^{\lRat}(\lRat_{t}, \bRat_{t}) \
\vFunc_{t}^{\nRat}(\mRat_{t}, \nRat_{t}) &amp; =
\vOpt_{t}^{\bRat}(\lRat_{t}, \bRat_{t})
\end{split}
\end{equation}</p>
</section>
<section id="unstructured-grid-interpolation">
<span id="id5"></span><h2>Unstructured Grid Interpolation<a class="headerlink" href="#unstructured-grid-interpolation" title="Permalink to this headline">#</a></h2>
<p>As in <span class="xref myst">Section %s</span>, the resulting endogenous grid is not rectilinear, and in this more complex problem it is not even a regular grid. We can see in Figure~\ref{fig:exog} that starting from a regular and rectilinear exogenous grid of liquid assets post-consumption <span class="math notranslate nohighlight">\(\lRat_{t}\)</span> and pension balances post-deposit <span class="math notranslate nohighlight">\(\bRat_{t}\)</span>, we obtain Figure~\ref{fig:endog} which shows an irregular and unstructured endogenous grid of market resources <span class="math notranslate nohighlight">\(\mRat_{t}\)</span> and pension balances pre-deposit <span class="math notranslate nohighlight">\(\nRat_{t}\)</span>.</p>
<p>\begin{figure}
\centering
\includegraphics[width=0.8\linewidth]{Figures/ExogenousGrid.pdf}
\caption{A regular, rectilinear exogenous grid of pension balances after deposit <span class="math notranslate nohighlight">\(\bRat_{t}\)</span> and liquid assets after consumption <span class="math notranslate nohighlight">\(\lRat_{t}\)</span>.}
\notinsubfile{\label{fig:exog}}
\end{figure}</p>
<p>\begin{figure}
\centering
\includegraphics[width=0.8\linewidth]{Figures/EndogenousGrid.pdf}
\caption{An irregular, unstructured endogenous grid of market resources <span class="math notranslate nohighlight">\(\mRat_{t}\)</span> and pension balances before deposit <span class="math notranslate nohighlight">\(\nRat_{t}\)</span>.}
\notinsubfile{\label{fig:endog}}
\end{figure}</p>
<p>To interpolate a function defined on an unstructured grid, we use Gaussian Process Regression as in <a href="#id6"><span class="problematic" id="id7">Scheidegger2019</span></a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Paper"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="2Method.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">The Sequential Endogenous Grid Method</p>
      </div>
    </a>
    <a class="right-next"
       href="4UnstructuredInterp.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Multivariate Interpolation on Non-Rectilinear Grids</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-more-complex-problem">A more complex problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#breaking-down-the-problem">Breaking down the problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-consumption-saving-problem">The consumption-saving problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-pension-deposit-problem">The pension deposit problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unstructured-grid-interpolation">Unstructured Grid Interpolation</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>